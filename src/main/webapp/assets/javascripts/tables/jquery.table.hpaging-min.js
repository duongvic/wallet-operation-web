(function(a){a(function(){a.widget("blk.hpaging",{options:{limit:5,activePage:1,parentID:"",navBar:null,totalPages:""},_create:function(){var b=this._getNavBar();a(this.element).after(b)},_getNavBar:function(){var c;var b=a(this.element).prop("id");this.options.parentID=b;c=a("<div id=pg_"+b+">").addClass("pagination").data("parentID",b);this.options.navBar=c;this.setPages(this.options.activePage);return c},clearPages:function(){a(this.options.navBar).empty();a("#"+this.options.parentID+" > tbody > tr").show();a("#"+this.options.parentID+" > tbody > tr").removeData("page");return true},newRow:function(d){this.setPages();var c=a("#"+this.options.parentID+" > tbody > tr");var b=a(c).eq(d).data("page");this.activePage(b)},newLimit:function(b){this.options.limit=b;if(this.setPages()){this.activePage(1)}},setPages:function(l){var c=false;if(this.clearPages()){var b=this.options.limit;var o=a("#"+this.options.parentID+" > tbody > tr");var d;var h=o.length/b;d=h;var k=h.toString().split(".");if(k.length==2){d=parseInt(k[0])+1}if(d==0){d=1}var m=this.options.parentID;this._setPage(m,1,"<<");this._setPage(m,"P-1","<");var n=0;var f=b;var j;for(var g=1;g<=d;g++){var e;e=o.slice(n,f);j=g;a(e).removeData("page");a(e).data("page",j);this._setPage(m,j,j);n=f;f=(parseInt(f)+parseInt(b))}this._setPage(m,"P+1",">");this._setPage(m,j,">>");this.options.totalPages=j;if(l!==undefined){this.activePage(l)}c=true}return c},_setPage:function(e,d,c){var b=a("<a>",{href:"#",text:(c),"data-page":(d)}).appendTo(this.options.navBar);this._on(b,{click:"onPageClick"})},activePage:function(c){var b=c*1;this.options.activePage=b;a("#"+this.options.parentID+" > tbody > tr").each(function(){if(a(this).data("page")==b){a(this).show()}else{a(this).hide()}});this._selectActivePage()},_selectActivePage:function(){var b=this.options.activePage;a(this.options.navBar).find("a").each(function(){var c=a(this).text();if(a(this).data("page")==b&&(c!="<<"&&c!=">>")){a(this).attr("class","active");a(this).siblings().attr("class","")}})},onPageClick:function(b){b.preventDefault();var c=a(b.target).data("page");if(c=="P-1"){c=this.options.activePage-1;if(c<1){c=1}}else{if(c=="P+1"){c=this.options.activePage+1;if(c>this.options.totalPages){c=this.options.totalPages}}}this.activePage(c)}})})})(jQuery);